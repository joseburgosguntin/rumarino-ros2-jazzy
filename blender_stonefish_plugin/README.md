# Blender to Stonefish Converter
This tool extracts objects from Blender `.blend` files and generates Stonefish `.scn` scenario files with proper coordinate transformations and material/look definitions.


## Installation
```bash
pip install pyyaml inotify
```
pyyaml is for extracting the yaml files into dictionaries and inotify is for the watchdog daemon for automatically updates to the output.scn file.

## How to use it with Blender

Basically in order to parse your objects into the `.scn` file the name of your objects must start with the `SF_` prefix. For example `SF_Ground` or `SF_Wall`.

### Use the the Custom properties in Blender

The way we decided to give the Stonefish properties from Blender is using the Custom Properties of Blender Objects.


### 3. Convert Blender to Stonefish

**Single conversion:**
```bash
python3 main.py scene.blend -o output.scn -c config_new.yaml
```

**Watch mode (auto-regenerate on file changes):**
```bash
python3 daemon.py scene.blend config_new.yaml output.scn
```

The daemon watches both the `.blend` file and config file, automatically regenerating the scenario when either changes.


## Dont run the Plugin yet!!!!

If you read this this means that youre kind of responsible to what youre running this means take into consideration the following things before running this.

1. The plugin doesn't support the entire features of stonefish. At the moment it only support enviroments tags and Static objects.
2. A part of this plugin was generated with Claude Sonnet 4.5. Like in general there are some parts of the `blender_extractor.py` that extract certain parts of the Binary data that I couldn't figure it out by myself and also the `mesh_extractor.py` was almost everything generated by AI.

3. Dont use Developer versions of blender. The last version of Blender right now Blender Version 5, use another header format and its compressed. I'm using version LTS 4.5 and it works pretty good.


## Thank You!!

- **Stonefish Simulator**: [https://github.com/patrykcieslak/stonefish](https://github.com/patrykcieslak/stonefish)
- **blendfile.py**: Used for reading Blender files - [https://github.com/scorpion81/blender-addons/tree/master/io_blend_utils](https://github.com/scorpion81/blender-addons/tree/master/io_blend_utils)

